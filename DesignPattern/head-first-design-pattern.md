### Head first设计模式总结

##### 设计原则
* 找出应用中可能需要变化之处，把它们独立出来，不要和那些不需要变化的代码混在一起
* 针对接口编程，而不是针对实现编程

  `针对接口编程`真正的意思是`针对超类型(supertype)编程`。
  更明确的说，变量的声明类型应该是超类型，通常是一个抽象类或者是一个接口。

  - 针对实现编程
    ```java
    Dog d = new Dog();
    d.bark();
    ```
  - 针对接口/超类型编程

    ```java
    Animal animal = new Animal();
    animal.makeSound();
    ```
    or
    ```java
    a = getAnimal();
    a.makeSound();
    ```

    > 这就是`多态`。

* 多用组合，少用继承
  > php可以用`trait`实现组合
  > 也可以用对象属性实现组合

* 对象之间松耦合设计

  依赖注入，观察者模式等

* 开放-关闭原则(Open-Close)
  > 类应该对扩展开放，对修改关闭

##### 设计模式

* 策略模式(Strategy)

  > 策略模式定义了算法族(a family of algorithms)，分别分装起来，可以互相替换。此模式让算法的变化独立于使用算法的客户(对象)。

* 观察者模式(Observer)

  > 观察者模式定义了对象之间的一对多依赖，当一个对象改变状态时，它的所有依赖者都会收到通知并自动更新。

* 装饰者模式

  > 装饰者模式动态地将责任附加到对象上。若要扩展功能，装饰者提供了比继承更有弹性的替代方案。

  - 装饰者和被装饰对象有相同的超类型
  - 可以用一个或多个装饰者包装一个对象
  - 装饰者和被装饰者有相同的超类型，所以在任何需要原始对象(被包装的)场合，可以用装饰过的对象代替它。
  - 装饰者可以在所委托被装饰者的行为之前与/或之后，加上自己的行为，以达到特定的目的。
  - 对象可以在任何时候被装饰，所以可以在运行时动态地，不限量地用你喜欢的装饰者来装饰对象。




